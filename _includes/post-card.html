{% assign post = include.post %}
{% if post %}
  {% assign show_excerpt = include.show_excerpt %}
  {% if show_excerpt == nil %}{% assign show_excerpt = true %}{% endif %}
  {% assign show_tags = include.show_tags %}
  {% if show_tags == nil %}{% assign show_tags = true %}{% endif %}

  <article class="post-card">
    <div class="post-card__meta">
      <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y-%m-%d" }}</time>
      {% if post.categories and post.categories.size > 0 %}
        {% assign primary_category = post.categories[0] %}
        {% assign cat_slug = primary_category | slugify %}
        <a class="post-card__category" href="{{ '/categories/' | append: cat_slug | append: '/' | relative_url }}">{{ primary_category }}</a>
      {% endif %}
    </div>

    <h2 class="post-card__title">
      <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
    </h2>

    {% if show_excerpt and post.excerpt %}
      <p class="post-card__excerpt">{{ post.excerpt | strip_html | strip | truncate: 180 }}</p>
    {% endif %}

    {% if show_tags and post.tags and post.tags.size > 0 %}
      <ul class="post-card__tags">
        {% for tag in post.tags %}
          {% assign tag_slug = tag | slugify %}
          <li><a href="{{ '/tags/' | append: tag_slug | append: '/' | relative_url }}">#{{ tag }}</a></li>
        {% endfor %}
      </ul>
    {% endif %}

  </article>
{% endif %}
